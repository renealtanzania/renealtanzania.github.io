<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Rebuild - Reneal Documentation</title>
    <script src="/public/css/script/tailwindcss3417.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .prose-link {
            color: #ef4444;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .prose-link:hover {
            color: #dc2626;
        }
        
        .nav-link {
            transition: all 0.2s;
        }
        
        .nav-link:hover {
            color: #ef4444;
            padding-left: 1rem;
        }
        
        code {
            background: #1f2937;
            color: #e5e7eb;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.875em;
            font-family: 'Courier New', monospace;
        }
        
        pre {
            background: #1f2937;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        
        pre code {
            background: transparent;
            padding: 0;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
        }
        
        .info-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 4px solid #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white border-r border-gray-200 fixed h-full overflow-y-auto sidebar">
            <div class="p-6">
                <h1 class="text-2xl font-bold text-red-600 mb-8">Reneal Docs</h1>
                <nav class="space-y-1">
                    <a href="#introduction" class="nav-link block text-sm text-gray-600 py-2">Introduction</a>
                    <a href="#overview" class="nav-link block text-sm text-gray-600 py-2 pl-4">Overview</a>
                    <a href="#system-features" class="nav-link block text-sm text-gray-600 py-2 pl-4">System Features</a>
                    <a href="#getting-started" class="nav-link block text-sm text-gray-600 py-2 pl-4">Getting Started</a>
                    <a href="#vpn-creation" class="nav-link block text-sm text-gray-600 py-2 font-semibold">VPN Creation</a>
                    <a href="#vpn-step1" class="nav-link block text-sm text-gray-600 py-2 pl-4">Setup Environment</a>
                    <a href="#vpn-step2" class="nav-link block text-sm text-gray-600 py-2 pl-4">Create School List</a>
                    <a href="#vpn-step3" class="nav-link block text-sm text-gray-600 py-2 pl-4">Edit Configuration</a>
                    <a href="#vpn-step4" class="nav-link block text-sm text-gray-600 py-2 pl-4">Build VPN Files</a>
                    <a href="#vpn-step5" class="nav-link block text-sm text-gray-600 py-2 pl-4">Copy to Flash Drive</a>
                    <a href="#vpn-step6" class="nav-link block text-sm text-gray-600 py-2 pl-4">Install on Servers</a>
                    <a href="#server-buildup" class="nav-link block text-sm text-gray-600 py-2 font-semibold">Server Build-Up</a>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64">
            <div class="max-w-4xl mx-auto px-8 py-12">
                <!-- Header -->
                <div class="mb-12">
                    <h1 id="introduction" class="text-4xl font-bold text-gray-900 mb-4">Server Rebuild</h1>
                    <p class="text-lg text-gray-600">Complete guide to Reneal server build-up procedures and VPN configuration</p>
                </div>

                <!-- Table of Contents -->
                <div class="bg-white rounded-lg border border-gray-200 p-6 mb-8">
                    <h2 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">On This Page</h2>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#introduction" class="prose-link">Introduction</a></li>
                        <li><a href="#vpn-creation" class="prose-link">VPN Creation Procedures</a></li>
                        <li><a href="#server-buildup" class="prose-link">Server Build-Up Procedures</a></li>
                    </ul>
                </div>

                <!-- Introduction Section -->
                <section class="mb-12">
                    <h2 id="overview" class="text-3xl font-bold text-gray-900 mb-6">Introduction</h2>
                    <p class="text-gray-700 leading-relaxed mb-4">
                        Welcome to the Official Reneal Documentation for Reneal Server Build-Up. This documentation provides detailed information about Reneal server build-up procedures, VPN creation processes, command lines and related features.
                    </p>
                    
                    <div class="warning-box rounded-lg p-6 mb-6">
                        <div class="flex items-start">
                            <svg class="w-6 h-6 text-amber-600 mr-3 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                            </svg>
                            <div>
                                <h3 class="font-semibold text-amber-900 mb-2">Important Notice</h3>
                                <p class="text-amber-800 text-sm">
                                    This should only be done by someone very familiar with using the Linux command line. Instructions must be followed exactly. Before rebuilding a server, it's critical to prepare VPN configuration files in advance including network settings and firewall rules.
                                </p>
                            </div>
                        </div>
                    </div>

                    <p class="text-gray-700 leading-relaxed mb-6">
                        By creating the VPN configuration files beforehand, you ensure a smooth transition and can immediately restore network connectivity after the rebuild is complete.
                    </p>
                </section>

                <!-- System Features -->
                <section class="mb-12">
                    <h2 id="system-features" class="text-3xl font-bold text-gray-900 mb-6">System Features</h2>
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <ul class="space-y-4 text-gray-700">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    <strong>Robust set of Applications:</strong> Office suite, photo/video editing, webpage design, desktop publishing, CAD, programming, and more
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    <strong>Educational programs:</strong> Math, science, English, geography
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    <strong>Extensive educational content:</strong> Books, movies, offline Wikipedia, past National Exam papers, Tanzania curriculum notes, science simulations
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    <strong>Epoptes:</strong> Classroom management program allowing teachers to monitor student work or share their screen to students (very convenient if school does not have a projector), shared video streaming capability
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    <strong>Permission-controlled content sharing:</strong> TeachersShared and AllUsersShared file storage areas
                                </div>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Getting Started -->
                <section class="mb-12">
                    <h2 id="getting-started" class="text-3xl font-bold text-gray-900 mb-6">Getting Started</h2>
                    <p class="text-gray-700 leading-relaxed mb-6">
                        To begin creating VPN files, follow these steps:
                    </p>
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <ol class="space-y-3 text-gray-700">
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
                                <span>You must create the VPN files in the <strong>MASTER Account</strong> on a Reneal server</span>
                            </li>
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
                                <span>You will then install the created files onto each newly built server</span>
                            </li>
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
                                <span>All necessary files required in build-up process will be on the VPN flash drive</span>
                            </li>
                        </ol>
                    </div>
                </section>

                <!-- VPN Creation Procedures -->
                <section class="mb-12">
                    <h2 id="vpn-creation" class="text-3xl font-bold text-gray-900 mb-6">VPN Creation Procedures</h2>

                    <!-- Step 1 -->
                    <div id="vpn-step1" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Setup Environment</h3>
                        <p class="text-gray-700 mb-4">
                            Boot up the server that you will be using to create the VPN files (you can use the JR Reneal server). Sign in to the master account and insert the VPN USB flash drive.
                        </p>
                        <div class="info-box rounded-lg p-6 mb-4">
                            <p class="text-blue-900 text-sm">
                                <strong>Note:</strong> You should only have to copy the VPN creation files one time, the first time you do this process on the JR Reneal server.
                            </p>
                        </div>
                        <p class="text-gray-700 mb-4">Copy the VPN creation files from the VPN USB drive to the JR Reneal server:</p>
                        <pre class="mb-4"><code>cd ~/CodeDevelopment/newSystemBuild
sudo cp -pR /media/master/RENEALVPN/makeWireguardVpnFiles .
cd makeWireguardVpnFiles
chmod 744 buildWgConf0.sh
chmod 744 buildWgConf1.sh</code></pre>
                    </div>

                    <!-- Step 2 -->
                    <div id="vpn-step2" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Create School List</h3>
                        <p class="text-gray-700 mb-4">
                            Create a text file in the <code>~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles</code> directory. An example file name might be <code>2025Aschools_wg.txt</code>.
                        </p>
                        <p class="text-gray-700 mb-4">
                            In this text file, put one school per row, with new school names added to "-main-server". Make sure there is no space in the entry, and make sure there is no extra line at the end of the text file.
                        </p>
                        <p class="text-gray-700 mb-4"><strong>Example format:</strong></p>
                        <pre class="mb-4"><code>amsha-main-server
mukulat-main-server
sanya_juu-main-server</code></pre>
                    </div>

                    <!-- Step 3 -->
                    <div id="vpn-step3" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Edit Configuration Files</h3>
                        <p class="text-gray-700 mb-4">
                            Edit the bash files that build the <code>wg0.conf</code> and <code>wg1.conf</code> files for each school. You need to edit the starting address for wireguard.
                        </p>
                        <div class="warning-box rounded-lg p-6 mb-4">
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-amber-600 mr-3 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                </svg>
                                <div>
                                    <h4 class="font-semibold text-amber-900 mb-2">Critical: Coordinate with Rene</h4>
                                    <p class="text-amber-800 text-sm">
                                        You must hand-edit the starting address (ADDR) for WireGuard in the two script files: <code class="bg-amber-100 text-amber-900">buildWgConf0.sh</code> and <code class="bg-amber-100 text-amber-900">buildWgConf1.sh</code>. You must discuss with Rene to get the correct starting address each time!
                                    </p>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-700 mb-4"><strong>Example address assignments:</strong></p>
                        <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
                            <li>For 2025A, the wireguard starting address was 128 (ten servers)</li>
                            <li>For 2025B, the wireguard addresses will start with 139</li>
                        </ul>
                    </div>

                    <!-- Step 4 -->
                    <div id="vpn-step4" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Build VPN Files</h3>
                        <p class="text-gray-700 mb-4">
                            Now you will run the script to build the new wg0.conf files for each school:
                        </p>
                        <p class="text-gray-700 mb-4"><strong>Build wg0 configuration files:</strong></p>
                        <pre class="mb-4"><code>cd wg0
cat ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/2025Aschools_wg | \
  ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/buildWgConf0.sh</code></pre>
                        <p class="text-gray-700 mb-4">This will create the files and put them in: <code>~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/wg0</code></p>
                        
                        <p class="text-gray-700 mb-4 mt-6"><strong>Build wg1 configuration files:</strong></p>
                        <pre class="mb-4"><code>cd ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/wg1
cat ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/2025Aschools_wg | \
  ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/buildWgConf1.sh</code></pre>
                        <p class="text-gray-700 mb-4">This will create the files and put them in: <code>~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/wg1</code></p>
                    </div>

                    <!-- Step 5 -->
                    <div id="vpn-step5" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Copy Files to Flash Drive</h3>
                        <p class="text-gray-700 mb-4">
                            Copy the VPN files you have just created to the VPN flash drive so they can be installed on each individual new server:
                        </p>
                        <pre class="mb-4"><code>cp -pRu ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/wg0 .
cp -pRu ~/CodeDevelopment/newSystemBuild/makeWireguardVpnFiles/wg1 .</code></pre>
                        <p class="text-gray-700 mb-4 mt-6">
                            Edit the program <code>install_info_wireguard.py</code> with the school name information:
                        </p>
                        <div class="warning-box rounded-lg p-6">
                            <p class="text-amber-800 text-sm">
                                <strong>Important:</strong> You must hand edit <code class="bg-amber-100 text-amber-900">install_info_wireguard.py</code> with the names of the schools.
                            </p>
                        </div>
                    </div>

                    <!-- Step 6 -->
                    <div id="vpn-step6" class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Install Files on Each Server</h3>
                        <p class="text-gray-700 mb-4">
                            For each new server you are building, you will install the wireguard files:
                        </p>
                        <ol class="space-y-3 text-gray-700 mb-4">
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
                                <span>Boot the new server</span>
                            </li>
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
                                <span>Sign in to the master account</span>
                            </li>
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
                                <span>Insert the VPN USB drive</span>
                            </li>
                            <li class="flex items-start">
                                <span class="flex-shrink-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">4</span>
                                <span>Run the installation program</span>
                            </li>
                        </ol>
                        <pre><code>sudo python3 install_info_wireguard.py</code></pre>

                        <p class="text-gray-700 mb-4 mt-2">
                            You will be prompted to enter the name of the school for this new server when you run the program, which will 
                            be matched against the list that you hand-edited in <strong> install_info_wireguard.py </strong>
                        </p>
                        <p class="text-gray-700 mb-4 mt-2">
                            This program will put the VPN files in /etc/wireguard on your new server.
                        </p>

                        <p class="text-gray-700 mb-4 mt-2">
                            Add the newly-created VPN addresses to the full list of hosts.
                        </p>
                        <p class="text-gray-700 mb-4 mt-2">
                            You will need to inform <strong> Rene </strong> of the school names and the VPN wireguard addresses (10.9.0.##).  
                            She will add them to the full list of hosts in the “hosts” file.
                        </p>
                    </div>
                </section>

                <!-- Server Build-Up -->
                <section class="mb-12">
                    <h2 id="server-buildup" class="text-3xl font-bold text-gray-900 mb-6">Server Build-Up Procedures</h2>
                    <p class="text-gray-700 leading-relaxed mb-6">
                        Server build-up process comes next after you have the VPN files ready.
                    </p>
                    <div class="info-box rounded-lg p-6">
                        <p class="text-blue-900 text-sm">
                            <strong>Coming Soon:</strong> Detailed server build-up procedures will be added in the next update.
                        </p>
                    </div>
                </section>

                <!-- Footer -->
                <footer class="mt-16 pt-8 border-t border-gray-200">
                    <div class="flex justify-between items-center text-sm text-gray-600">
                        <p>&copy; 2025 Reneal Tanzania. All rights reserved.</p>
                        <a href="#" class="prose-link">Back to Top ↑</a>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Highlight active section in navigation
        const sections = document.querySelectorAll('section[id], div[id], h2[id], h3[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('text-red-600', 'font-semibold');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('text-red-600', 'font-semibold');
                }
            });
        });
    </script>
</body>
</html>
